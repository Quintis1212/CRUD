(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(11),r=n.n(i),o=(n(103),n(104),n(170)),l=n(171),s=n(173),u=n(172),d=n(136),j=n(19),b=n(164),m=n(10),h=n(17),p=n(21),O=n(178),f=n(177),g=n(169),x=n(75),v=n.n(x).a.create({baseURL:"https://shop-2f42b-default-rtdb.firebaseio.com/"}),D=n(2);function y(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var w=Object(b.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function T(e){var t,n,a=e.mode,i=void 0===a?"default":a,r=e.item,o=void 0===r?{}:r,l=w(),s=c.a.useState(y),u=Object(p.a)(s,1)[0],d=c.a.useState(!1),b=Object(p.a)(d,2),x=b[0],T=b[1],E=c.a.useRef(null),F=c.a.useRef(null),N=c.a.useRef(null),R=c.a.useRef(null),I=c.a.useRef(null),M=c.a.useRef(null),A=c.a.useRef(null),S=Object(j.b)(),C=function(){T(!1)},k=Object(D.jsxs)("div",{style:u,className:l.paper,children:[Object(D.jsx)(f.a,{inputRef:E,label:"Name of product",style:{margin:8},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},defaultValue:o.name}),Object(D.jsx)(f.a,{inputRef:F,label:"URL to image of your product",style:{margin:8},helperText:"URL must be a link such as : https://... and picture format (jpg|gif|png)",fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},defaultValue:o.imageUrl}),Object(D.jsx)(f.a,{inputRef:N,label:"Description",style:{margin:8},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0},defaultValue:o.description}),Object(D.jsx)(f.a,{inputRef:R,label:"Quantity",className:l.textField,helperText:"Must be a number more or equal than 1",margin:"dense",variant:"outlined",type:"number",defaultValue:o.count||1}),Object(D.jsx)(f.a,{inputRef:I,label:"Height",className:l.textField,helperText:"Must be a number",margin:"dense",type:"number",variant:"outlined",defaultValue:null===o||void 0===o||null===(t=o.size)||void 0===t?void 0:t.height}),Object(D.jsx)(f.a,{inputRef:M,label:"Width",className:l.textField,helperText:"Must be a number",margin:"dense",variant:"outlined",type:"number",defaultValue:null===o||void 0===o||null===(n=o.size)||void 0===n?void 0:n.width}),Object(D.jsx)(f.a,{inputRef:A,label:"Weight",className:l.textField,helperText:"Must be a number",margin:"dense",variant:"outlined",type:"number",defaultValue:o.weight}),Object(D.jsx)("div",{children:Object(D.jsx)(g.a,{onClick:function(){var e=[E.current.value,"string"],t=[F.current.value,"URL"],n=[N.current.value,"string"],a=[+R.current.value,"number"],c=[+I.current.value,"number"],r=[+A.current.value,"number"],l=[+M.current.value,"number"],s=function(e,t){switch(t){case"string":return e.length>0&&e.length<150;case"URL":return null!=e.match(/(jpg|gif|png)/);case"number":return+e>0&&+e<1e5;default:throw new Error("Some case was misspelled!")}};if([e,t,n,a,c,r,l].every((function(e){return!!s.apply(void 0,Object(h.a)(e))||(alert("Form input is not valid , ".concat(e[0]||"your currnet field"," must be a ").concat("number"===e[1]?"positive number, less that 10000 ":e[1]," and not empty")),!1)}))){var u={count:a[0],description:n[0],imageUrl:t[0],name:e[0],size:{height:c[0],width:l[0]},weight:r[0]};"edit"===i?v.patch("/data/".concat(o.id,".json"),u).then((function(e){console.log(e),u.id=o.id,S({type:"UPDATE_ITEM",item:u}),alert("Item was updated , check page for new item :)")})).catch((function(e){console.log(e)})):v.post("/data.json",u).then((function(e){console.log(e),alert("Item published , check page for new item :)"),S({type:"ADD_ITEM",item:Object(m.a)(Object(m.a)({},u),{},{comments:[]})})})).catch((function(e){console.log(e)}))}},variant:"contained",children:"Add"})}),Object(D.jsx)("div",{children:Object(D.jsx)(g.a,{onClick:C,variant:"contained",children:"Cancel"})})]});return Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:Object(D.jsx)(g.a,{onClick:function(){T(!0)},variant:"contained",children:"edit"===i?"Edit":"New product"})}),Object(D.jsx)("div",{children:Object(D.jsx)(O.a,{open:x,onClose:C,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:k})})]})}function E(e){var t=e.comments,n=void 0===t?[]:t,a=e.id,i=c.a.useRef();return n=Object.values(n),Object(D.jsxs)(D.Fragment,{children:[(n.filter(Boolean)||[]).map((function(e,t){var n=e.description,c=e.date;return Object(D.jsxs)("div",{className:"comments",children:[Object(D.jsx)(d.a,{component:"h5",children:"Comment :"}),Object(D.jsx)(d.a,{component:"h6",children:n}),Object(D.jsxs)(d.a,{component:"h6",children:["Date : ",c]}),Object(D.jsx)("button",{onClick:function(){return function(e){v.delete("/data/".concat(a,"/comments/").concat(e,".json")).then((function(e){console.log(e),alert("Comment was deleted , please reload the page")})).catch((function(e){console.log(e)}))}(t)},children:"Delete comment"})]},c+t)})),Object(D.jsx)("input",{ref:i,type:"text"}),Object(D.jsx)("button",{onClick:function(){var e=i.current.value;if(e.length>0&&e.length<50){var t=new Date,n=String(t.getDate()).padStart(2,"0"),c=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear(),o={date:t=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+c+"/"+n+"/"+r,description:e,id:2,productId:a};v.post("/data/".concat(a,"/comments.json"),o).then((function(e){console.log(e),alert("Comment was added , please reload the page to see changes")})).catch((function(e){console.log(e)}))}else alert("Your comment is empty or very big")},children:"Add comment"})]})}var F=Object(b.a)({root:{maxWidth:"80%",paddingBottom:"10%"},media:{height:440}});function N(){var e=F(),t=window.location.href.split("/").pop(),n=Object(j.c)((function(e){return e.contentData})).find((function(e){return""+e.id===""+t})),a=n.name,c=n.description,i=n.imageUrl,r=n.count,b=n.comments,m=n.weight,h=n.size,p=h.height,O=h.width;return Object(D.jsxs)(o.a,{className:e.root+" product-item",children:[Object(D.jsx)(T,{mode:"edit",item:n}),Object(D.jsxs)(l.a,{children:[Object(D.jsx)(u.a,{className:e.media,image:i,title:a}),Object(D.jsxs)(s.a,{children:[Object(D.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"h2",children:a}),Object(D.jsx)(d.a,{variant:"body2",color:"textSecondary",component:"p",children:c}),Object(D.jsxs)(d.a,{component:"h5",children:["quantity : ",r]}),Object(D.jsxs)(d.a,{component:"h5",children:["weight : ",m,"g"]}),Object(D.jsxs)(d.a,{component:"h5",children:["height : ",p]}),Object(D.jsxs)(d.a,{component:"h5",children:["width : ",O]})]})]}),Object(D.jsx)(E,{comments:b,id:t})]})}function R(){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(N,{})})}var I=n(174),M=n(43),A=Object(b.a)({root:{maxWidth:345,paddingTop:30,marginTop:20},media:{height:140}});function S(e){var t=e.productItem,n=A(),a=Object(j.b)(),c=t.name,i=t.description,r=t.imageUrl,b=t.count,m=t.id;return Object(D.jsxs)(o.a,{className:n.root+" product-item",children:[Object(D.jsxs)(l.a,{children:[Object(D.jsx)(u.a,{className:n.media,image:r,title:c}),Object(D.jsxs)(s.a,{children:[Object(D.jsx)(d.a,{gutterBottom:!0,variant:"h5",component:"h2",children:c}),Object(D.jsx)(d.a,{variant:"body2",color:"textSecondary",component:"p",children:i}),Object(D.jsxs)(d.a,{component:"h5",children:["quantity : ",b]})]})]}),Object(D.jsxs)(I.a,{children:[Object(D.jsx)(g.a,{size:"small",color:"primary",children:Object(D.jsx)(M.b,{to:"/productPage/"+m,children:"More Info"})}),Object(D.jsx)(g.a,{size:"small",color:"primary",onClick:function(){v.delete("/data/".concat(m,".json")).then((function(e){a({type:"DELETE_ITEM",id:m})})).catch((function(e){console.log(e)}))},children:"Delete item"})]})]})}var C=n(84),k=n(179),L=n(175),_=n(176),q=n(180),U=n(168),P=Object(b.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:100}}}}));function W(){var e=P(),t=Object(a.useState)(1),n=Object(p.a)(t,2),c=n[0],i=n[1],r=Object(j.c)((function(e){return e.uniqueNames})),o=Object(j.b)(),l=function(e){var t=e.target.value;o({type:"FILTER_DATA",itemName:t})};return Object(D.jsxs)(q.a,{component:"fieldset",children:[Object(D.jsx)(U.a,{component:"legend",children:"Filters :"}),Object(D.jsx)(L.a,{"aria-label":"position",column:"true",children:r.map((function(e){return Object(D.jsx)("div",{children:Object(D.jsx)(_.a,{value:e,control:Object(D.jsx)(k.a,{color:"primary"}),label:e,labelPlacement:"end",onChange:l})},e)}))}),Object(D.jsx)("form",{className:e.root,autoComplete:"off",children:Object(D.jsx)(f.a,{id:"standard-basic",label:"Quantity",size:"small",type:"number",value:c,onChange:function(e){var t=parseInt(e.target.value);!Number.isNaN(t)&&t>0?(i(t),o({type:"FILTER_DATA",quantity:t})):e.preventDefault()}})})]})}function z(){var e=Object(j.c)((function(e){return e.contentData})),t=Object(a.useState)(""),n=Object(p.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){if(e){var t=e.map((function(e){return Object(D.jsx)(S,{productItem:e},e.id)}));i(t)}else{var n=Object(D.jsx)("div",{children:Object(D.jsx)(C.a,{})});i(n)}}),[e]),Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"products-list",children:e?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(W,{}),Object(D.jsx)("div",{className:"product-items-wrapper",children:c})]}):c})})}var V=n(15);var B=function(){var e=Object(j.b)();return Object(a.useEffect)((function(){v.get("/data.json").then((function(t){e({type:"SET_DATA",payload:t.data})}))}),[e]),Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(M.a,{children:Object(D.jsxs)("div",{children:[Object(D.jsx)("nav",{children:Object(D.jsxs)("ul",{children:[Object(D.jsx)("li",{children:Object(D.jsx)(g.a,{variant:"contained",children:Object(D.jsx)(M.b,{to:"/",children:"Home"})})}),Object(D.jsx)("li",{children:Object(D.jsx)(T,{})})]})}),Object(D.jsxs)(V.c,{children:[Object(D.jsx)(V.a,{path:"/productPage",children:Object(D.jsx)(R,{})}),Object(D.jsx)(V.a,{path:"/",children:Object(D.jsx)(z,{})})]})]})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},J=n(83);var Q=Object(J.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":var n=t.payload,a=[];Object.keys(n).forEach((function(e){var t=Object(m.a)(Object(m.a)({},n[e]),{},{id:e});a=[].concat(Object(h.a)(a),[t])}));var c=Object(h.a)(new Set(a.map((function(e){return e.name}))));return{staticData:a,contentData:a,activeFilters:[],uniqueNames:c,quantity:1,showModal:!1};case"DELETE_ITEM":var i=t.id,r=e.staticData.filter((function(e){return e.id!==i})),o=e.contentData.filter((function(e){return e.id!==i}));return Object(m.a)(Object(m.a)({},e),{},{staticData:r,contentData:o});case"ADD_ITEM":var l=t.item,s=Math.floor(1e4*Math.random())+1;l.id=s;var u=[].concat(Object(h.a)(e.staticData),[l]),d=[].concat(Object(h.a)(e.contentData),[l]);return Object(m.a)(Object(m.a)({},e),{},{staticData:u,contentData:d});case"UPDATE_ITEM":var j=t.item,b=e.staticData.map((function(e){return e.id===j.id?j:e}));return console.log(b),Object(m.a)(Object(m.a)({},e),{},{staticData:b,contentData:b});case"SHOW_MODAL":return Object(m.a)(Object(m.a)({},e),{},{showModal:!0});case"HIDE_MODAL":return Object(m.a)(Object(m.a)({},e),{},{showModal:!1});case"FILTER_DATA":var p=t.itemName,O=t.quantity,f=Object(h.a)(e.activeFilters),g=e.uniqueNames.length,x={contentData:Object(h.a)(e.staticData)};if(p){var v=f.includes(p);if(v){var D=f.indexOf(p);f.splice(D,1),x.activeFilters=Object(h.a)(f)}else f.push(p),x.activeFilters=Object(h.a)(f),console.log(x.activeFilters)}if(f.length===g||0===f.length)x=Object(m.a)(Object(m.a)({},x),{},{contentData:Object(h.a)(e.staticData)});else{var y=x.contentData.filter((function(e){return f.includes(e.name)}));x=Object(m.a)(Object(m.a)({},x),{},{contentData:y})}if(O){var w=x.contentData.filter((function(e){return e.count>=O}));x=Object(m.a)(Object(m.a)({},x),{},{contentData:w,quantity:O})}else{var T=x.contentData.filter((function(t){return t.count>=e.quantity}));x=Object(m.a)(Object(m.a)({},x),{},{contentData:T})}return console.log(x),Object(m.a)(Object(m.a)({},e),x);default:return e}}));r.a.render(Object(D.jsx)(j.a,{store:Q,children:Object(D.jsx)(c.a.StrictMode,{children:Object(D.jsx)(B,{})})}),document.getElementById("root")),H()}},[[134,1,2]]]);
//# sourceMappingURL=main.d69fc70b.chunk.js.map